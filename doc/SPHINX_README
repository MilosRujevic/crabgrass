SPHINX
========================================

Sphinx is a reverse index that runs in the background and handles full text
searches. 

Without sphinx installed and the sphinx search daemon running, full text searches
will not work and searching will fall back to dumb mysql searches.

installing sphinx
------------------

check http://www.sphinxsearch.com/downloads.html for the latest version

/--
wget http://www.sphinxsearch.com/downloads/sphinx-xxxxxx.tar.gz
tar xzvf sphinx-xxxxxx.tar.gz
cd sphinx-xxxxxxx
sudo apt-get install libmysqlclient15-dev
./configure -sysconfdir=/etc
make
sudo make install
\--

or, instead of @sudo make install@ you can try @sudo checkinstall@ to install as
a debian package.

configuring sphinx
------------------

Edit config/sphinx.yml to change any options you need to. 

To test to see if sphinx is installed and working, you can try to build the
config file. Generally, this is done for you, but it is good for testing:

/-------
rake ts:config
\-------

If you don't get any errors, then things are probably working.

indexing crabgrass pages
------------------------

/---
cd ~/development/crabgrass
rake cg:update_page_terms
rake ts:index
\---

running sphinx
--------------

Start the sphinx search daemon:

/--
cd ~/development/crabgrass
rake ts:start
\--

running sphinx in production
----------------------------

Crabgrass uses delta indexes. This makes it faster to get new changes in the database,
but only so long as the delta index is small. So, you need to clear out the delta index
by reindexing all the records on a regular basis:

Set up a cron job to do this nightly:

/--
cd /usr/apps/crabgrass/current && rake ts:index RAILS_ENV=production
\--


