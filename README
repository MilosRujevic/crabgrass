CRABGRASS
=========================================================

Crabgrass is a software libre web application designed for group and network
organizing, and tailored to the needs of the global justice movement. The long
term goal is to provide the technical tools to facilitate active, confederal,
and directly democratic social change networks.

INSTALL FOR DEVELOPMENT
=========================================================

debian/ubuntu
--------------

required:
  apt-get install ruby1.8 ruby1.8-dev libmysql-ruby rubygems
  gem install -y rails
  gem install RedCloth -v 3.0.4 
  gem install rmagick tzinfo

required for running tests:
  gem install ruby-debug hpricot

optional (but necessary for image thumbnails and document previews):
  apt-get graphicsmagick openoffice.org-headless msttcorefonts
  OpenOffice should be at least version 2.4 or greater
  (if you are running etch: apt-get -t etch-backports install openoffice.org-headless)

optional for inline latex rendering:
  apt-get install graphicsmagick texlive gs-gpl
  gem install open4

optional for improved mime-type support:
  gem install mime-types

then check out the code:
  cd ~/development
  git clone git://labs.riseup.net/crabgrass.git

set up your database:
(1) install the mysql (currently crabgrass only works with mysql)
    sudo apt-get install mysql-server
(2) create databases
    sudo mysqladmin create crabgrass_development
    sudo mysqladmin create crabgrass_test
    sudo mysqladmin create crabgrass
(3) create a config/database.yml file. 
(4) build the crabgrass database and populate it with test data
    cd ~/development/crabgrass
    rake db:schema:load
    rake db:fixtures:load

upgrading:
  cd ~/development/crabgrass
  git pull
  rake db:migrate
  rake db:fixtures:load

Also, 'rake --version' must be 8.1 or greater.

mysqladmin -u root -p create crabgrass

GRANT USAGE ON *.* TO 'crabgrass'@'localhost' IDENTIFIED BY 'xxxx';
GRANT ALL PRIVILEGES ON crabgrass.* TO 'crabgrass'@'localhost';
flush privileges;

INSTALL FOR PRODUCTION
==========================================================

To be written...

logger:
  You can run analysis on the logs using pl_analyze
  if the SyslogLogger gem is installed. 

FURTHER READING
=========================================================

vendor/plugins/README: details on each plugin.

GEMS INFO
=========================================================

required
---------

tzinfo
  required for timezone support

redcloth
  greencloth derives from redcloth

rmagick
  Used to scale avatars and build thumbnails.

optional
--------

open4
  A better way to run open pipes. Used by latex renderer. 

SyslogLogger
  Improved logging that allows for performance
  analysis of the logs. 

mime-types
  Used to detect mime-types of uploaded files
  (when the browser does not correctly report it)

hpricot
  Required for running tests. Used by the plugin webrat.
  
ADMINISTRATION
=========================================================

Via the console
----------------

One goal in Crabgrass system design is to avoid creating
different levels of privilege for users.  Shall this be
an egalitarian social network, or shall we build another
anarchist bureaucracy?  But what about when people need
a new password, etc? 
Example:  RESETING A PASSWORD
$ script/console production
>> u = User.find_for_forget("user's email")
>> u.password = u.password_confirmation = "new password"
>> u.save

Via super_admin mod
-------------------

There is a mod that is disabled by default that gives certain users
a super admin interface. 

(1) Edit config/sites.yml to add which users should be super admins
(2) Edit config/mods_enabled.list to enable super_admin module
(3) Edit config/routes.rb and uncomment the super_admin routes
(4) restart rails, login, and browse to /admin

