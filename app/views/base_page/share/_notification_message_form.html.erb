<%
  forced_send = false if forced_send.nil?

  check_box_options = {:onchange => "checkbox_toggle_visibility(this, 'notification_details')"}
  if forced_send
    check_box_options.merge!({:checked => true, :disabled => true})
  end
%>

  <tr>
    <td><%= check_box :notification, :send_notice, check_box_options %></td>
    <td><label for='notification_send_notice'><%= 'Send notification to inbox'[:share_send_notification]%></label></td>
  </tr>
  <tbody id='notification_details' style='<%= forced_send ? '' : 'display:none' %>'>
  <tr>
    <td></td>
    <td>
      <%= 'Send additional notification via'[:share_additional_notification] %>:
      <label><%= check_box :notification, :send_email %> <%= 'Email'[:email] %></label>
<!--
these are not supported yet.
      <label><%= check_box :notification, :send_sms %> <%= 'Text Message'[:text_message] %></label>
      <label><%= check_box :notification, :send_xmpp %> <%= 'Chat'[:chat] %></label>
      <br/>
      <label><%= check_box :notification, :send_encrypted %> <%= 'Send only if encrypted distribution is possible'[:send_only_with_encryption] %></label>

-->
    </td>
  </tr>
  <tr>
    <td><%= check_box :notification, :include_message, :onchange => "checkbox_toggle_visibility(this, 'share_message_holder'); $('share_message').focus()" %></td>
    <td><label for='notification_include_message'><%= 'Include a custom message'[:share_include_message] %></label></td>
  </tr>
  <tr>
    <td></td>
    <td><div id='share_message_holder' style='display:none'>
      <%= text_area_tag 'message', '', :id => 'share_message', :rows => 6, :cols => 60 %>
    </div></td>
  <tr>
  </tbody>

