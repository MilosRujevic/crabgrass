<%
  # locals: posts

  today = []
  yesterday = []
  week = []
  later = []
  
  post = posts.shift

  while post and after_day_start?(post.updated_at)
    today << post
    post = posts.shift
  end

  while post and after_yesterday_start?(post.updated_at)
    yesterday << post
    post = posts.shift
  end

  while post and after_week_start?(post.updated_at)
    week << post
    post = posts.shift
  end

  while post
    later << post
    post = posts.shift
  end
-%>
<div class="wall_posts">
<table><tr>
<% if today.any? -%>
  <tr><td colspan='2' class='date'><%= "Today"[:date_today] -%></td></tr>
  <% today.each do |post| -%>
    <%= wall_post(post) -%>
  <% end -%>
<% end -%>
<% if yesterday.any? -%>
  <tr><td colspan='2' class='date'><%= "Yesterday"[:date_yesterday] -%></td></tr>
  <% yesterday.each do |post| -%>
    <%= wall_post(post) -%>
  <% end -%>
<% end -%>
<% if week.any? -%>
  <tr><td colspan='2' class='date'><%= "This Past Week"[:date_this_week] -%></td></tr>
  <% week.each do |post| -%>
    <%= wall_post(post) -%>
  <% end -%>
<% end -%>
<% if later.any? -%>
  <tr><td colspan='2' class='date'><%= "Older"[:date_older] -%></td></tr>
  <% later.each do |post| -%>
    <%= wall_post(post) -%>
  <% end -%>
<% end -%>
</tr></table>
</div>
